import{S as e,i as t,s as a,e as o,x as s,c as r,a as n,d as l,y as c,f as i,h as u,g as m,m as d,k as p,o as v,p as f,I as h,J as y,K as g,t as b,b as S,l as $,L as I,M as T}from"./index.8f88dd1c.js";import{w as k}from"./index.7e06e2f5.js";import{C as x}from"./ContentContainer.ae9d2b2e.js";const E=((e,t)=>{const{subscribe:a,set:o}=k(t);return{subscribe:a,set:o,useLocalStorage:()=>{const t=void 0!==typeof window?localStorage.getItem(e):void 0;t&&o(JSON.parse(t)),void 0!==typeof window&&a(t=>{localStorage.setItem(e,JSON.stringify(t))})}}})("storage",{}),{document:w}=g;function A(e){var t,a,d,p,v,f,h,y,g,T,k,x,E,w,A;return{c(){t=o("div"),a=o("div"),d=o("textarea"),p=s(),v=o("div"),f=o("button"),h=b("convert & copy"),y=s(),g=o("div"),T=o("button"),k=b("save as template"),x=s(),E=o("button"),w=b("delete template"),this.h()},l(e){t=r(e,"DIV",{class:!0},!1);var o=n(t);a=r(o,"DIV",{class:!0},!1);var s=n(a);d=r(s,"TEXTAREA",{value:!0,placeholder:!0,class:!0},!1),n(d).forEach(l),s.forEach(l),p=c(o),v=r(o,"DIV",{class:!0},!1);var i=n(v);f=r(i,"BUTTON",{class:!0},!1);var u=n(f);h=S(u,"convert & copy"),u.forEach(l),y=c(i),g=r(i,"DIV",{class:!0},!1);var m=n(g);T=r(m,"BUTTON",{class:!0},!1);var b=n(T);k=S(b,"save as template"),b.forEach(l),x=c(m),E=r(m,"BUTTON",{class:!0},!1);var $=n(E);w=S($,"delete template"),$.forEach(l),m.forEach(l),i.forEach(l),o.forEach(l),this.h()},h(){d.value=e.maybeStorage,i(d,"placeholder","Write your post here..."),i(d,"class","Input svelte-1rkod7m"),i(a,"class","TextArea svelte-1rkod7m"),i(f,"class","Convert svelte-1rkod7m"),i(T,"class","Save svelte-1rkod7m"),i(E,"class","Clear svelte-1rkod7m"),i(g,"class","UtilityBar svelte-1rkod7m"),i(v,"class","ButtonBar svelte-1rkod7m"),i(t,"class","Formatter svelte-1rkod7m"),A=[$(d,"input",e.invalidateForm),$(f,"click",e.convertAndCopy),$(T,"click",e.saveAsTemplate),$(E,"click",e.clearTemplate)]},m(e,o){m(e,t,o),u(t,a),u(a,d),u(t,p),u(t,v),u(v,f),u(f,h),u(v,y),u(v,g),u(g,T),u(T,k),u(g,x),u(g,E),u(E,w)},p(e,t){e.maybeStorage&&(d.value=t.maybeStorage)},d(e){e&&l(t),I(A)}}}function C(e){var t,a,h,y=new x({props:{$$slots:{default:[A]},$$scope:{ctx:e}}});return{c(){t=o("meta"),a=s(),y.$$.fragment.c(),this.h()},l(e){t=r(e,"META",{name:!0,content:!0},!1),n(t).forEach(l),a=c(e),y.$$.fragment.l(e),this.h()},h(){w.title="Ben McGarvey | Instaformatter",i(t,"name","description"),i(t,"content","Format your instagram captions. Add linebreaks easily!")},m(e,o){u(w.head,t),m(e,a,o),d(y,e,o),h=!0},p(e,t){var a={};(e.$$scope||e.maybeStorage)&&(a.$$scope={changed:e,ctx:t}),y.$set(a)},i(e){h||(p(y.$$.fragment,e),h=!0)},o(e){v(y.$$.fragment,e),h=!1},d(e){l(t),e&&l(a),f(y,e)}}}function B(e,t,a){let o,s,r;h(e,E,e=>{a("$storage",o=e)});let n="";y(async()=>{E.useLocalStorage(),a("maybeStorage",n=o.template||null),i=o.template||!1,r=document.querySelector(".Input"),s=function(e){var t=getComputedStyle(e),a=parseInt(t.paddingTop)+parseInt(t.paddingBottom);return e.clientHeight-a}(r),r.style.height=`${s}px`});const l=e=>e.split("\n").join("⁣\n"),c=e=>{e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),alert("Successfully converted and automatically copied to your clipboard!"),e.blur()};let i;return i=!1,{maybeStorage:n,invalidateForm:function(){console.log(i),i=!1},convertAndCopy:function(){const e=document.querySelector(".Input"),t=e.value;e.value=l(t),c(e),i=!0},saveAsTemplate:function(){if(!i)return void alert("Your post isn't formatted, make sure to convert before saving!");const e=document.querySelector(".Input").value;o.template!==e?!o.template||confirm("You're about to override an existing template, are you sure you want to proceed?")?(T(E,o.template=e,o),alert("Your template has been saved. It will prepopulate next time you visit this page on this device.")):alert("Your template has has not been saved."):alert("This is the same as your current template, try making changes before saving.")},clearTemplate:function(){confirm("You're about to delete your saved template are you sure you want to proceed?")?(T(E,o={}),document.querySelector(".Input"),alert("Your saved template has been deleted.")):alert("Your saved template has not been deleted.")}}}export default class extends e{constructor(e){super(),t(this,e,B,C,a,[])}}
