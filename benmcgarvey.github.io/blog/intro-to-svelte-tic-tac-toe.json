{"html":"<p>This is a tutorial for the Svelte javascript framework inspired by the Intro to React <a href=\"https://reactjs.org/tutorial/tutorial.html\">tutorial</a>.</p>\n<p>We&#39;ll follow the React version pretty tightly as far as milestones go but our implementation will start to diverge towards the middle.</p>\n<p>I made this tutorial as a way to teach myself more about Svelte and hopefully provide something useful for other folks who want to learn about it too.</p>\n<h2 id=\"so-what-are-we-building\">So what are we building?</h2>\n<p>Just like in the React version, we&#39;re going to be building an interactive tic-tac-toe game to demonstrate some of Svelte&#39;s core features such as creating components, and managing state.</p>\n<p>You can take a look at the fiinished project here: <a href=\"https://svelte.dev/repl/fd5d45a774a54c85bb3db1199c07b42a?version=3.12.1\">Final Result</a>. There is a bit going on in there but don&#39;t worry, we&#39;re going to build it up together, piece by piece.</p>\n<p>The interesting thing to note about this game is the history you&#39;ll see buiding up to the side as you progress through the game. You can use this to travel backwards and forwards in time through the game. Stay tuned to see how it&#39;s done with Svelte!</p>\n<h2 id=\"setup\">Setup</h2>\n<p>This tutorial assumes you have some familiarity with HTML, CSS, and Javascript. Prior knowledge of Svelte and/or React isn&#39;t necessary but it will be more interesting if you&#39;re familiar with the basics of either.</p>\n<p>We&#39;re following along with the React tutorial and they provide two ways to do it so we will too. You can get setup in two ways:</p>\n<h3 id=\"option-1-write-code-in-the-browser\">Option 1: Write code in the browser</h3>\n<p>This is the easiest way to get started.</p>\n<p>Open up the starter code <a href=\"https://svelte.dev/repl/75f705a8650f4851bd2e172456d6dfcc?version=3.15.0\">here</a> and you can skip right to the <a href=\"blog/intro-to-svelte-tic-tac-toe/#overview\">start</a>!</p>\n<h3 id=\"option-2-write-code-in-a-local-environment\">Option 2: Write code in a local environment</h3>\n<p>This takes a little more setup, and is completely optional, but should be straightforward if you&#39;re comfortable around a command line.</p>\n<ol>\n<li>Install <a href=\"https://nodejs.org\">Node.js</a> if you don&#39;t have it already</li>\n<li>Open up the <a href=\"https://svelte.dev/repl/75f705a8650f4851bd2e172456d6dfcc?version=3\">starter code</a> and download it using the link in the top right corner</li>\n<li>After unzipping the download, navigate to the project and install the dependencies</li>\n</ol>\n<pre><code class=\"language-bash\"><pre class='test language-bash'><code><span class=\"token function\">npm</span> <span class=\"token function\">install</span></code></pre></code></pre>\n<ol start=\"4\">\n<li>Run the app!</li>\n</ol>\n<pre><code class=\"language-bash\"><pre class='test language-bash'><code><span class=\"token function\">npm</span> run dev</code></pre></code></pre>\n<p>Your dev server should now be up and running - all changes to your files will be immediately updated in the browser.</p>\n<p>You can now follow along by making changes in your preferred text editor.</p>\n<p>N.B. in this tutorial, I&#39;ll often omit some parts files in code snippets if that section is not changing. If you need to delete code, I&#39;ll let you know. Finished code for each section will be provided so you can always check what&#39;s there if you get lost.</p>\n<p>Let&#39;s get started!</p>\n<h2 id=\"overview\">Overview</h2>\n<h3 id=\"what-is-svelte\">What is Svelte?</h3>\n<p>Svelte is a javascript component framework for building front-end web applications. It allows you to easily build complex application out of isolated components. What makes it different to other frameworks like React or Vue? Whereas other frameworks ship their entire libraries to the client, and translate your code on the fly, Svelte compiles at build time into a lightweight, fast, imperative, js bundle.</p>\n<p>An application built with Svelte is made up of isolated components that are found in <code>.svelte</code> files. Each file looks a lot like regular html and can contain up to three sections: <code>script</code>, <code>style</code> and/or regular <code>html</code>. From the Svelte <a href=\"https://svelte.dev/docs#Component_format\">docs</a>:</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token comment\">/* logic goes here */</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token comment\">/* styles go here */</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- markup (zero or more items) goes here --></span></code></pre></code></pre>\n<p>Just like in the React tutorial, lets take a look at what a simple shopping list component might look like in svelte, to get a feel for what a <em>real</em> component looks like.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token comment\">&lt;!-- Filename: `ShoppingList.svelte` --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> name<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>shopping-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Shopping List for {name}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Instagram<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>WhatsApp<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>Oculus<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Any &#39;props&#39; that are declared and exposed in the <code>&lt;script /&gt;</code> tag are available to the markdown below, by wrapping them in curly brackets <code>{}</code>.</p>\n<p>Using a component is done in the same way as React, by importing it and using it like a HTML element.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> ShoppingList <span class=\"token keyword\">from</span> <span class=\"token string\">'./'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ShoppingList</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Mark<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></code></pre>\n<p>When a component is created, the props can be passed down by setting them in the tags, similar to how you would set an attribute. Props can be any js type, so you can pass in a whole object containing all props or break them down as you need. Just remember to handle them correctly in the child.</p>\n<p>Svelte also has a handy shortcut which React doesn&#39;t currently have. If the name of the prop is the same as the variable you&#39;re using you can omit part of the declaration.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> ShoppingList <span class=\"token keyword\">from</span> <span class=\"token string\">'./'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Mark'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ShoppingList</span> <span class=\"token attr-name\">{</span> <span class=\"token attr-name\">name</span> <span class=\"token attr-name\">}</span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token comment\">&lt;!-- identical to &lt;ShoppingList name=\"Mark\" /> --></span></code></pre></code></pre>\n<p>Handy!</p>\n<p>The shopping list example above only contains standard HTML elements however it can be composed of other Svelte components allowing us to build up complex UI from simple components with single responsibilities.</p>\n<p>This example also doesn&#39;t contain any styling. In Svelte, each component is responsible for styling itself. At compile time, elements targeted by styles are given a unique hash corresponding to their styles. This is how Svelte is able to surgically target DOM elements and avoid styles unintentinally leaking into other components.</p>\n<h3 id=\"inspecting-the-starter-code\">Inspecting the Starter Code</h3>\n<p>Lets take a quick walkthrough of what we&#39;re going to be starting with.</p>\n<p>If you&#39;re following along in the browser, simply open up the starter <a href=\"https://svelte.dev/repl/75f705a8650f4851bd2e172456d6dfcc?version=3.15.0\">code</a>. If you&#39;re working locally, open up the <code>src</code> directory and we&#39;ll take a quick tour.</p>\n<p><code>main.js</code> contains the renderer function for our app. This simply imports a top level component and inserts it into the DOM at the target we give it. In this case we&#39;re targeting the body. You can find the base HTML file at <code>public/index.html</code>.</p>\n<p><code>App.svelte</code> is the container for our game. It imports the <code>Board</code> from <code>Board.svelte</code> and renders it down there on line 22.</p>\n<p>The Board component found in <code>Board.svelte</code> renders 9 <code>Square</code> components to create our board, and also displays the status.</p>\n<p>Finally, <code>Square.svelte</code> renders a single button.</p>\n<h3 id=\"passing-data-through-props\">Passing Data Through Props</h3>\n<p>Lets try passing data down from the board to our Square components.</p>\n<p>Update the script and markdown sections in <code>Square.svelte</code> so that the component accepts a prop corresponding to its board position and displays it inside the button</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- styles... --></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Note that we&#39;re setting a default for <code>value</code>, this will be the fallback if the prop is not passed to the component.</p>\n<p>Next we need to update our Board to pass in the corresponding indexes.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{status}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>6<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>You should now see a number in each square, from 0 to 8.</p>\n<p><a href=\"https://svelte.dev/repl/38015384c16b451eac27887cdf9dc634?version=3.15.0\">View the full code at this point</a></p>\n<p>Hooray! You&#39;ve successfully learned how to pass props down from parent to child in Svelte. This is the basis for building complex applications in Svelte, so well done!</p>\n<h3 id=\"making-an-interactive-component\">Making an Interactive Component</h3>\n<p>Numbers in the squares aren&#39;t very useful, we&#39;d like to put &quot;X&quot;s and &quot;O&quot;s in there when they&#39;re clicked. To get us started, let&#39;s fill the components with an &quot;X&quot; when we click them.</p>\n<p>As a first step lets take a quick look at how svelte handles <a href=\"https://svelte.dev/docs#on_element_event\">events</a>. Svelte uses <code>on:eventname</code> syntax in elements to listen for DOM events. The handler should be a <em>function</em> which you declare. Handlers can be declared inline with no penalty so lets test it out!</p>\n<p>Update the markdown in <code>Square.svelte</code> to the following:</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => alert('click') }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>When you click the button you should see a browser alert pop up. Nice!</p>\n<p>Similar to React, forgetting <code>() =&gt;</code> and simply writing <code>on:click={ alert(&#39;click&#39;) }</code> would cause the function to be called everytime the component renders. This is not good, so make sure you always remember the <code>() =&gt;</code>.</p>\n<p>N.B. the quotation marks around the <code>on:click</code> function are optional. They&#39;re included here just to help out the syntax highlighter.</p>\n<p>This is fun but isn&#39;t very useful for a tic-tac-toe game, let&#39;s get back on track.</p>\n<p>We want the square to &quot;remember&quot; it was clicked and render an &quot;X&quot; for us. To remember things, Svelte components use &#39;stores&#39;. These are very similar to &#39;state&#39; in React. They represent an immutable state which can be subscribed to by the component. Changes to the store are reflected immediately by a re-render of the component.</p>\n<p>To add &#39;state&#39; to our <code>Square</code> component. Make the following changes to the script and markdown.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> value<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> unsubscribe <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    value <span class=\"token operator\">=</span> val<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => store.set('X') }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Woah! What did we just do? Let&#39;s break it down.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Here we import a writable (think &#39;editable&#39;) store. The store is an object with three methods: subscribe, set, and update.</p>\n<p>Next up we create our store object and set an empty string as the initial state.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>To make our value &#39;reactive&#39; we call the subscribe function on our store. Whenever the store now changes, the function we pass in to the subscribe function will run. In this case, we&#39;ll update our value so that it stays in sync with the store&#39;s state but you can do whatever you like here. Note that the subscribe function returns an unsubscribe function which can be used to stop listening to changes. We won&#39;t be using this in this tutorial so this can be ignored for now.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">let</span> value<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> unsubscribe <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  value <span class=\"token operator\">=</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Finally, in our button we call the <code>store.set()</code> function when the button gets clicked. This will set the state for us and since our <code>value</code> variable is subscribed to the store, it will automatically update and display an &quot;X&quot;! Try it out for yourself!</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => store.set('X') }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Now, since this is such a common pattern, the lovely Svelte folks have given us a shorthand to automatically subscribe to a store. All you have to do is add a <code>$</code> to the variable inside your component. The below code is equivalent to the above.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => value.set('X') }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ $value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>If you&#39;re feeling really adventurous, you can replace <code>value.set(&#39;X&#39;)</code> with <code>$value = &#39;X&#39;</code>. As long as the store is writable, assignment to a <code>$</code>-prefixed variable will result in a call to the store&#39;s set function. Spicy!</p>\n<p><a href=\"https://svelte.dev/repl/551bde8698754230892984e31c3dbb4f?version=3.15.0\">View the full code at this point</a></p>\n<h2 id=\"completing-the-game\">Completing the Game</h2>\n<p>To get to a working game, what else do we need?</p>\n<p>We need to a way to alternate between players, and a way to determine when we have a winner. We have all the ingredients we need to put it together, so let&#39;s get to it!</p>\n<h3 id=\"lifting-state-up\">Lifting State Up</h3>\n<p>In the current set up, each square tracks its own state and collectively they represent the state of the game. This makes checking for overall state tricky. A better approach would be for board state to be kept elsewhere, and just tell the <code>Square</code> components what to display.</p>\n<p>Let&#39;s try and do this in the same way React would do this. The &#39;React&#39; way to do things is to keep the board state on the <code>Board</code> component and pass in an <code>onClick</code> function to the <code>Square</code> which, when called, will update the state relating to it&#39;s index on the board.</p>\n<p>What would that look like in Svelte?</p>\n<p>First up, lets update our <code>Square</code> component so it can take the props we need.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> onClick<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ onClick }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>The <code>Square</code> now takes in the value it should display, and the function to call when it gets clicked. After updating this your board is probably displaying numbers 0 to 9, and the compiler is complaining that <code>&quot;&lt;Square&gt; was created without expected prop &#39;onClick&#39;&quot;</code>. We&#39;ll fix this now.</p>\n<p>We need to:</p>\n<ul>\n<li>set up a store in <code>Board</code></li>\n<li>define a function to update the store when a <code>Square</code> is clicked</li>\n<li>pass this function and board values down to the <code>Square</code> components</li>\n</ul>\n<p>Setting up the store is easy - we know how to do this</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Square <span class=\"token keyword\">from</span> <span class=\"token string\">'./Square.svelte'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> board <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span><span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> status <span class=\"token operator\">=</span> <span class=\"token string\">'Next player: X'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Next we need a function to update the store. Since stores are immutable we need to pass the update function a function which will return a new state. In this example, we use the handy <code>Object.assign</code> function to create a new array object, copy in the existing variables and then set the index we&#39;re interested in to &quot;X&quot;.</p>\n<p>Add this to the script section in <code>Board</code>.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span>\n  board<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">squares</span> <span class=\"token operator\">=></span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> squares<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Lastly, we need to update our Squares so that they take in our new state and click handler.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{status}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(0) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[0] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(1) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[1] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(2) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[2] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(3) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[3] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(4) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[4] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(5) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[5] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(6) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[6] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(7) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[7] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">onClick</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => handleClick(8) }<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ $board[8] }<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Now each Square takes in a function and a board position relating to it&#39;s position on the board. If you click on any of the squares, they should now update exactly as they did before.</p>\n<p><a href=\"https://svelte.dev/repl/da7de61cb0434807881bfedcf746a56e?version=3.15.0\">View the full code at this point</a></p>\n<h3 id=\"custom-stores\">Custom Stores</h3>\n<p>Great right? Well, there is a little repetition here. We need to add the board index value <em>twice</em> in the Square props. Not a huge problem right here but imagine if we accidentally passed mismatching integers to the arguments? Not good, we&#39;d rather not repeat ourselves.</p>\n<p>In React we could clean up by declaring a <code>renderSquare</code> function which returns a component for us. Just pass in the index and it does the rest for us. Like this:</p>\n<pre><code class=\"language-jsx\"><pre class='test language-jsx'><code>  <span class=\"token function\">renderSquare</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">index</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Square</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>squares<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></code></pre>\n<p>Nifty.</p>\n<p>Unfortunately, Svelte doesn&#39;t support render functions and we have to find other ways to streamline our code.</p>\n<p>What if we could move all our game state out of our components and into a specialised, always in sync store, accessible from anywhere?</p>\n<p>We&#39;ve seen a store before. Back when we made out button interactive. In that example we only accessed the store from one component and made very minimal changes.</p>\n<p>We can do more. Stores in Svelte quite powerful objects that provide an easy way to manage state between components. We can actually import the same store in multiple places and they&#39;ll all subscribe to the same global store object. This means they&#39;ll all get updates immediately when something changes, and if necessary, can modify the state when needed!</p>\n<p>We can use them to easily decouple our components from our data. In our game, we can set up a custom store representing our game state and add some basic operations to assist us.</p>\n<p>To get us going, we need to create a new file in our <code>src</code> directory to contain our custom store. You can name it whatever you like but I&#39;m going to refer to it as <code>stores.js</code>. This will contain our custom store.</p>\n<p>Insert the following into the store</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> defaultStore <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token punctuation\">:</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> subscribe<span class=\"token punctuation\">,</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">,</span> update <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span>defaultStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    subscribe<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">move</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        newBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> board<span class=\"token punctuation\">:</span> newBoard <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Here we have an implementation of a small custom store. We are exporting an object with two methods: <code>subscribe</code>, and <code>move</code>. We could just export the update function directly but then the calling site would need to worry about how to update the state. This way, the subscribee just has to tell the store which cell should be updated.</p>\n<p>Note that we&#39;re now storing an object <em>containing</em> our board state instead of the board state directly. Check out <code>defaultStore</code>. This approach allows us to easily add other entries to our state in future.</p>\n<p>There are a number of ways to use this new store and it can be imported wherever it is useful. In building this tutorial I played around with a few approaches and landed on an implementation where the <code>Board</code> passes the <code>Square</code> it&#39;s index in the board and the <code>Square</code> <em>looks itself up</em> from the store.</p>\n<p>To get started, import the store into <code>Square</code></p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores.js'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> index<span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Now the markdown can access our custom store and it&#39;s methods just like we did before. Update the markdown to call our move function on click and look itself up from the board to find it&#39;s display value.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => store.move(index) }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ $store.board[index] }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>All thats left is to pass the index down to the <code>Squares</code>. Update your <code>Board</code> to look like this:</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> Square <span class=\"token keyword\">from</span> <span class=\"token string\">'./Square.svelte'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> status <span class=\"token operator\">=</span> <span class=\"token string\">'Next player: X'</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{status}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>board-row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>6<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>7<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Square</span> <span class=\"token attr-name\">index</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>And we&#39;re done! We get the exact same behaviour but now all our state management is contained in a single location, and other observers will easily be able to subscribe and watch the state as it changes. This will come in handy when we need to determine a winner. It might also be handy if you wanted to change something about the UX on different turns, or dispatch an event when certain states occur.</p>\n<h3 id=\"taking-turns\">Taking turns</h3>\n<p>Our game is missing a major feature. We can&#39;t place down &quot;O&quot;s!</p>\n<p>To fix this, we need to keep track of who&#39;s turn it is. We can do this in our store.</p>\n<p>We&#39;ll add a new boolean entry <code>xIsNext</code> to our store and update it each time a move is made. We&#39;ll alternate between putting down an &quot;X&quot; or an &quot;O&quot; depending on this boolean. Add the lines marked with <code>&lt;--</code> to your store.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> writable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'svelte/store'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> defaultStore <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  board<span class=\"token punctuation\">:</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  xIsNext<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// &lt;--</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> subscribe<span class=\"token punctuation\">,</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">,</span> update <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span>defaultStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    subscribe<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">move</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        newBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// &lt;--</span>\n        <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          board<span class=\"token punctuation\">:</span> newBoard<span class=\"token punctuation\">,</span>\n          xIsNext<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token comment\">// &lt;--</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Your game should now be showing &quot;X&quot;s and &quot;O&quot;s alternately. Awesome!</p>\n<p>Now let&#39;s update the status in so it shows the right player. We&#39;ll use the <code>$:</code> shorthand to let the Svelte compiler know that this variable is &#39;reactive&#39; and should be updated each time the value it depends on changes. In this case, it will update any time <code>store.xIsNext</code> updates. We&#39;ll also prefix this with a <code>$</code> so that Svelte will automatically subscribe to the store for us.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores.js'</span><span class=\"token punctuation\">;</span>\n\n  $<span class=\"token punctuation\">:</span> status <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Next player: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ status }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- ... --></span></code></pre></code></pre>\n<p><a href=\"https://svelte.dev/repl/a53e3e06070942a4b51e09a89c33d631?version=3.15.0\">View the full code at this point</a></p>\n<h3 id=\"declaring-a-winner\">Declaring a Winner</h3>\n<p>We&#39;re nearly there! All we need now is to determine when we have a winner and end the game.</p>\n<p>Add this helper function to <code>stores.js</code>.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">squares</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> lines<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> lines<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>squares<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> squares<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> squares<span class=\"token punctuation\">[</span>b<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> squares<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> squares<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> squares<span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></code></pre>\n<p>This is lifted line for line from the React version and like their version, will check an array of 9 squares for a winner and return &quot;X&quot;, &quot;O&quot;, or null as appropriate.</p>\n<p>We now need to check for a winner each time a move is made. We can do this in the <code>Board</code> by subscribing to the store. When the store updates (i.e. when a move is made), the function will trigger.</p>\n<p>If a player has won, we&#39;ll display <code>Winner: X</code> or <code>Winner: O</code>.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> store<span class=\"token punctuation\">,</span> calculateWinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores.js'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> Square <span class=\"token keyword\">from</span> <span class=\"token string\">'./Square.svelte'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> status<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> winner<span class=\"token punctuation\">;</span>\n\n  store<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    winner <span class=\"token operator\">=</span> <span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>winner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      status <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Winner: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>winner<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      status <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Next player: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>Finally, we need to change the store&#39;s <code>move</code> function to return early if a winner has been found, to prevent any further moves being made.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token function-variable function\">move</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    newBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      board<span class=\"token punctuation\">:</span> newBoard<span class=\"token punctuation\">,</span>\n      xIsNext<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>store<span class=\"token punctuation\">.</span>xIsNext\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p><a href=\"https://svelte.dev/repl/3b0801a127724e8db131de35893fc6f3?version=3.15.0\">View the full code at this point</a></p>\n<p>Congratulations, you&#39;ve just learned the basics of Svelte! And you&#39;ve got a cool game to show your friends. Everyone is a winner.</p>\n<h2 id=\"adding-time-travel\">Adding Time Travel</h2>\n<p>As an additional exercise we want to make it possible to go forward and back in time through the game history.</p>\n<h3 id=\"storing-a-history-of-moves\">Storing a History of Moves</h3>\n<p>In order to move through our history, we need to store all the states we&#39;ve been through. Our history should look something like this</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code>history <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// Before first move</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// After first move</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// After second move</span>\n  <span class=\"token punctuation\">{</span>\n    board<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>As an array, we can easily move through the history by simply setting the most current board to a particular index in the list. Without time travel, the most recent board is simply the last in the list.</p>\n<p>Update <code>defaultBoard</code> to this</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">const</span> defaultBoard <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  history<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    board<span class=\"token punctuation\">:</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n  xIsNext<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></code></pre>\n<p>This will break our game because the store expects a one dimensional board not a history. We need to update the store so that it correctly tracks our history.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">function</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> subscribe<span class=\"token punctuation\">,</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">,</span> update <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">writable</span><span class=\"token punctuation\">(</span>defaultBoard<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    subscribe<span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">move</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span>\n      <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> current <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        newBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          history<span class=\"token punctuation\">:</span> store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n              board<span class=\"token punctuation\">:</span> newBoard\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          xIsNext<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>store<span class=\"token punctuation\">.</span>xIsNext\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">reset</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>defaultBoard<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></code></pre>\n<p>Let&#39;s take a closer look at what&#39;s going on here.</p>\n<p>First we find the most recent board state. The index of the most recent board is equal to the length of our history minus one. Then we can use <code>current.board</code> instead of <code>store.board</code>.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">const</span> current <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nnewBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Finally we update the store by concatenating the most recent board state to the history.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  history<span class=\"token punctuation\">:</span> store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      board<span class=\"token punctuation\">:</span> newBoard\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  xIsNext<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>store<span class=\"token punctuation\">.</span>xIsNext\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Now we need to update our components to read from the new history.</p>\n<p><code>Square.svelte</code></p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores.js'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">let</span> index<span class=\"token punctuation\">;</span>\n\n  $<span class=\"token punctuation\">:</span> current <span class=\"token operator\">=</span> $store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>$store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  $<span class=\"token punctuation\">:</span> value <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => store.move(index) }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ value }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p><code>Board.svelte</code></p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code>winner <span class=\"token operator\">=</span> <span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>And we&#39;re done! The game should behave exactly as before however now we are storing a history of past moves as we go.</p>\n<p><a href=\"https://svelte.dev/repl/7bf356ca75454eb3aba461ac1b5cb8dd?version=3.15.0\">View the full code at this point</a></p>\n<h3 id=\"lifting-state-up-again\">Lifting State Up (Again)</h3>\n<p>This part isn&#39;t quite as significant as it is in the React version of this tutorial since we&#39;re using a store to track our game state but we do want to manage the moves from the very top level so we&#39;ll follow suit and lift up state to the <code>App</code> component.</p>\n<p>For us, this means cutting and pasting this section of script from <code>Board</code> to <code>App</code></p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> store<span class=\"token punctuation\">,</span> calculateWinner <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores.js'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> status<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> winner<span class=\"token punctuation\">;</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  winner <span class=\"token operator\">=</span> <span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>winner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    status <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Winner: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>winner<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    status <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Next player: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Delete the status div from <code>Board</code></p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{ status }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>and add to <code>App</code> in place of <code>&lt;!-- TODO: status --&gt;</code>.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>{ status }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></code></pre>\n<p>n.b. at this point, you might get a complaint from your runner/compiler due to an unused css selector in <code>Board.svelte</code>. We can go ahead and delete this selector as it is no longer needed.</p>\n<h3 id=\"showing-the-past-moves\">Showing the Past Moves</h3>\n<p>Since we&#39;re now recording the move history, we can display them as a list to the player.</p>\n<p>Unlike React, we&#39;re not working with javascript objects so we can&#39;t use something like the <code>map</code> function to render a component per past state. Instead, Svelte provides a number of helpers. We&#39;re going to use the <a href=\"https://svelte.dev/docs#each\"><code>{#each ...}</code></a> expression to iterate over our list of histories and generate our components.</p>\n<p>Replace <code>&lt;!-- TODO: moves --&gt;</code> in <code>App</code> with the following. This will make a list element for each entry in the history. Try it out and see the list build up next to the board as you play!</p>\n<p>We haven&#39;t implemented the <code>jumpTo()</code> function yet so you&#39;ll see some errors in the console. We&#39;ll fix this in the next and final section.</p>\n<pre><code class=\"language-html\"><pre class='test language-markup'><code>{#each $store.history as step, move}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\"><span class=\"token namespace\">on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>{ () => store.jumpTo(move) }<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  {#if move}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Go to move # { move }<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  {:else}\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Go to game start<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  {/if}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n{/each}</code></pre></code></pre>\n<h3 id=\"implementing-time-travel\">Implementing Time Travel</h3>\n<p>First of all, we need to add <code>stepNumber</code> to the store to indicate the board state we are currently viewing.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token keyword\">const</span> defaultBoard <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  history<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      board<span class=\"token punctuation\">:</span> <span class=\"token function\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  xIsNext<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  stepNumber<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Next we implement the <code>jumpTo</code> method on our store. We&#39;ll also update <code>xIsNext</code> to be true when <code>step</code> is even.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token function-variable function\">jumpTo</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">step</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      xIsNext<span class=\"token punctuation\">:</span> step <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      stepNumber<span class=\"token punctuation\">:</span> step\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>Now we need to make a few changes to our move function to handle going to any arbitrary board state in our history.</p>\n<p>We now use <code>store.history.slice(0, store.stepNumber + 1)</code> instead of <code>store.history</code> so that if we go back in time then make a move, the now invalid history will be thrown away.</p>\n<p>Since <code>stepNumber</code> reflects the state shown to the user, after making a move, we need to set this to the step corresponding to the most recent move -&gt; <code>stepNumber: history.length</code>.</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code><span class=\"token function-variable function\">move</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> history <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">.</span>stepNumber <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> current <span class=\"token operator\">=</span> history<span class=\"token punctuation\">[</span>store<span class=\"token punctuation\">.</span>stepNumber<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">calculateWinner</span><span class=\"token punctuation\">(</span>current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> store<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> newBoard <span class=\"token operator\">=</span> current<span class=\"token punctuation\">.</span>board<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  newBoard<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span>xIsNext <span class=\"token operator\">?</span> <span class=\"token string\">'X'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    history<span class=\"token punctuation\">:</span> history<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n      board<span class=\"token punctuation\">:</span> newBoard\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    xIsNext<span class=\"token punctuation\">:</span> <span class=\"token operator\">!</span>store<span class=\"token punctuation\">.</span>xIsNext<span class=\"token punctuation\">,</span>\n    stepNumber<span class=\"token punctuation\">:</span> history<span class=\"token punctuation\">.</span>length\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></code></pre>\n<p>Finally, we need to tell the <code>Square</code> to look up it&#39;s value from the history. Update <code>current</code> in <code>Square</code> like this</p>\n<pre><code class=\"language-js\"><pre class='test language-javascript'><code>$<span class=\"token punctuation\">:</span> current <span class=\"token operator\">=</span> $store<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">[</span>$store<span class=\"token punctuation\">.</span>stepNumber<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></code></pre>\n<p>And there you have it! You should now be able to navigate back and forward through the history of moves, and pick up at any point.</p>\n<p><a href=\"https://svelte.dev/repl/6d0b78edbe0440fcb4e3ccbf1709501d?version=3.15.0\">View the full code at this point</a></p>\n<h2 id=\"wrapping-up\">Wrapping up</h2>\n<p>Congratulations! You&#39;ve made it!</p>\n<p>You now have a game that:</p>\n<ul>\n<li>lets you play tic-tac-toe</li>\n<li>indicates who&#39;s turn it is</li>\n<li>indicates when a player has won</li>\n<li>stores the game&#39;s history</li>\n<li>allows players to undo moves and pick up from an earlier point</li>\n</ul>\n<p>Good job! I hope this walkthrough gave you a better understanding of how Svelte works and what can be achieved with it.</p>\n<p>If you&#39;d like more information you can check out the rest of the svelte documentation here: <a href=\"https://svelte.dev/docs\">svelte.dev/docs</a></p>\n<p>If you have any questions or comments please feel free to get in touch with me via email</p>\n<ul>\n<li><a href=\"mailto:hello@benmcgarvey.com\">hello@benmcgarvey.com</a></li>\n</ul>\n","metadata":{"title":"Intro to Svelte - Tic Tac Toe","date":"2019-12-08T12:00:00+10:00","draft":"false","metaDescription":"Learn Svelte with this Introduction Tutorial. Based on the Intro React Tutorial. Make your first Svelte App and learn how to make an interactive tic-tac-toe game."},"slug":"intro-to-svelte-tic-tac-toe","file":"Svelte Tutorial: Intro - Tic Tac Toe.md"}